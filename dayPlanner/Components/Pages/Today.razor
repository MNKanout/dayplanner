@page "/today"
@using dayPlanner.Data.Entities
@rendermode InteractiveServer

<PageTitle>Today's Plan - You've Got This! ğŸŒŸ</PageTitle>

<div class="today-page">
    <h1>ğŸŒŸ Today's Amazing Schedule ğŸŒŸ</h1>
    <p class="today-subtitle">You're doing great! Let's see what adventures await you today.</p>
    
    @if (plan == null)
    {
        <div class="no-plan-message" role="alert">
            <div class="message-icon">ğŸ“‹</div>
            <p class="message-title">No plan found for today.</p>
            <p class="message-text">Don't worry! Ask a teacher or parent to create a plan for you, and you'll be all set!</p>
        </div>
    }
    else if (!plan.Activities.Any())
    {
        <div class="no-activities-message" role="alert">
            <div class="message-icon">âœ¨</div>
            <p class="message-title">No activities scheduled for today.</p>
            <p class="message-text">Looks like you have a free day! Enjoy your time!</p>
        </div>
    }
    else
    {
        <div class="activities-list" role="list" aria-label="Today's activities">
            @foreach (var activity in plan.Activities)
            {
                var isCompleted = activity.CompletedAt.HasValue;
                var isCurrent = currentActivity != null && currentActivity.Id == activity.Id;
                
                <div role="listitem">
                    <ActivityCard 
                        Activity="activity"
                        IsCurrent="isCurrent"
                        IsCompleted="isCompleted"
                        ShowActions="true"
                        OnMarkAsDone="HandleMarkAsDone" />
                </div>
            }
        </div>

        @if (AllActivitiesCompleted)
        {
            <div class="completion-celebration">
                <div class="celebration-content">
                    <div class="trophy-icon">ğŸ†</div>
                    <h2 class="celebration-title">ğŸ‰ Amazing! You Did It! ğŸ‰</h2>
                    <p class="celebration-message">
                        You completed all your tasks today! You're a superstar! 
                        Look at everything you accomplished - you should be so proud of yourself!
                    </p>
                    <p class="celebration-encouragement">
                        Ready to take on tomorrow? You've got this! ğŸ’ª
                    </p>
                    <div class="celebration-confetti">
                        <span>âœ¨</span>
                        <span>ğŸŒŸ</span>
                        <span>ğŸŠ</span>
                        <span>ğŸ‰</span>
                        <span>â­</span>
                    </div>
                </div>
            </div>
        }

        <div class="plan-next-day-container">
            <a href="/edit-plan" class="plan-next-day-btn">
                <span class="btn-icon">ğŸ“…</span>
                <span class="btn-text">Plan Your Next Day!</span>
                <span class="btn-icon">âœ¨</span>
            </a>
        </div>
    }
</div>

